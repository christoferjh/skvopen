<html ng-app="skvopenApp">
    <head>
        <script src="bower_components/angular/angular.min.js"></script>
        <script src="bower_components/angular-aria/angular-aria.min.js"></script>
        <script src="bower_components/angular-animate/angular-animate.min.js"></script>
        <script src="bower_components/angular-material/angular-material.min.js"></script>
        <script src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAVk5mXuf260O90PV_Z3whQoMfRUpbxdug'></script>

        <script src="frontend/skvopenApp.js"></script>
        <script>
            function initMap() {
                angular.element(document.getElementById('skvopenController')).scope().initMap();
            }
        </script>


        <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="https://material.angularjs.org/latest/angular-material.min.css" rel="stylesheet"/>

        <style>
            html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            }
            #map {
            height: 70%;
            }

            tbody > tr:hover {
                cursor: pointer;
                border-bottom:1pt solid black;
            }

            .is-better {
                color: green;
            }

            .is-worse {
                color: red;
            }
            .mer table, th, td {
    			border: 1px solid black;
			} 

        </style>

    </head>

    <body ng-controller="skvopenController" id="skvopenController" data-ng-init="fragaOmLon()" onload="initMap()">

        <div class="container">

            <div id="map"></div>
            <br/>
            <form>
                Lön: <input type="text" ng-model="lon"/> <br/>
                <br/>
                Hemkommun: <input type="text" placeholder='Ingen kommun vald ännu' ng-model="nuvarandekommun" readonly/> <br/>
                <br/>

                <div class="row">
                    <div class="col-md-6">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Kommun</th>
                                    <th>Kvalitetsökning</th>
                                </tr>
                            </thead>
                            <tbody ng-repeat="(kommun, data) in varorPerKommun">
                                <tr ng-click="visaMerInfo(data)" ng-class="data.isBetter ? 'is-better' : 'is-worse'">
                                    <td>
                                        {{kommun}}
                                    </td>
                                    <td>
                                        {{data.diff_totManad.antalvaror.descr}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
					
                    <div class="col-md-6" id="merInfo" class="mer">
                    	<table style='border:1'  class="mer">
                    	<tr><td></td><td>{{merInfo.nuvarandeskatt.namn}}</td><td>{{merInfo.flyttskatt.namn}}</td><td>skillnad</td></tr>
                    	<tr><td>Kommunalskatt</td><td>{{merInfo.nuvarandeskatt.totkommunskat}}</td><td>{{merInfo.flyttskatt.totkommunskat}}</td><td>{{merInfo.diff_Kommunalskatt.antalvaror.descr}}</td></tr>
    					<tr><td>Landstingsskatt</td><td>{{merInfo.nuvarandeskatt.landstingsskatt}}</td><td>{{merInfo.flyttskatt.landstingsskatt}}</td><td>{{merInfo.diff_Landstingsskatt.antalvaror.descr}}</td></tr>
                    	
                    	<tr><td>totalt</td><td>{{merInfo.nuvarandeskatt.totManad}}</td><td>{{merInfo.flyttskatt.totManad}}</td><td>{{merInfo.diff_totManad.antalvaror.descr}}</td></tr>
                    	<tr><td>per år</td><td>{{merInfo.nuvarandeskatt.tot}}</td><td>{{merInfo.flyttskatt.tot}}</td><td>{{merInfo.diff_tot.antalvaror.descr}}</td></tr>
                        </table>
                        
                        
                    </div>
                </div>

                <input type="submit" value="Återställ" ng-click="aterstall()"/>
            </form>
        </body>
    </html>
